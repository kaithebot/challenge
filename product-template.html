<!-- Dynamic Product Card Template for Bulk Products -->
<script type="text/template" id="product-card-template">
    <div class="product-card" data-category="{{category}}" data-collection="{{collection}}">
        <div class="product-image">
            <span>{{productName}} - {{shortDescription}}</span>
        </div>
        <div class="product-info">
            <h3 class="product-title">{{productName}}</h3>
            <p class="product-description">{{description}}</p>
            
            {{#if features}}
            <ul class="product-features">
                {{#each features}}
                <li>{{this}}</li>
                {{/each}}
            </ul>
            {{/if}}
            
            {{#if dimensions}}
            <div class="product-sizes">
                <h4>Product Dimensions:</h4>
                <table class="size-table">
                    {{#each dimensions}}
                    <tr><td><strong>{{@key}}:</strong></td><td>{{this}}</td></tr>
                    {{/each}}
                </table>
            </div>
            {{/if}}
            
            {{#if specifications}}
            <div class="product-specs">
                <h4>Specifications:</h4>
                {{#each specifications}}
                <p><strong>{{@key}}:</strong> {{this}}</p>
                {{/each}}
            </div>
            {{/if}}
            
            <a href="https://wa.me/1234567890?text=Hi! I'm interested in the {{productName}}. Can you provide pricing and availability?" class="whatsapp-button" target="_blank">
                Order via WhatsApp
            </a>
        </div>
    </div>
</script>

<!-- JavaScript to dynamically load products -->
<script>
// Product data will be populated by the scraper
const furnitureData = [];

// Function to render product cards
function renderProducts(products, containerId = 'products-container') {
    const container = document.getElementById(containerId);
    const template = document.getElementById('product-card-template').innerHTML;
    
    products.forEach(product => {
        const productHtml = template
            .replace(/{{productName}}/g, product.name)
            .replace(/{{shortDescription}}/g, product.shortDescription || 'Premium Furniture')
            .replace(/{{description}}/g, product.description)
            .replace(/{{category}}/g, product.category)
            .replace(/{{collection}}/g, product.collection || '');
        
        container.innerHTML += productHtml;
    });
}

// Function to filter products by category
function filterProducts(category) {
    const filtered = category === 'all' 
        ? furnitureData 
        : furnitureData.filter(p => p.category === category);
    
    document.getElementById('products-container').innerHTML = '';
    renderProducts(filtered);
}

// Initialize the product grid when data is loaded
function initializeProductGrid() {
    if (furnitureData.length > 0) {
        renderProducts(furnitureData);
        setupCategoryFilters();
    }
}

function setupCategoryFilters() {
    const categories = [...new Set(furnitureData.map(p => p.category))];
    const filterContainer = document.getElementById('category-filters');
    
    if (filterContainer) {
        filterContainer.innerHTML = '<button onclick="filterProducts(\'all\')">All Products</button>';
        categories.forEach(cat => {
            filterContainer.innerHTML += `<button onclick="filterProducts('${cat}')">${cat}</button>`;
        });
    }
}
</script>